// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"strconv"

	"todo-goat/internal/domain"
)

func Index(todos []domain.Todo) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!doctype html><html lang=\"id\" x-data><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>üêê GOAT Todo</title><script src=\"https://cdn.tailwindcss.com\"></script><script defer src=\"https://cdn.jsdelivr.net/npm/@imacrayon/alpine-ajax@0.12.6/dist/cdn.min.js\"></script><script defer src=\"https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js\"></script><link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"><link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin><link href=\"https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap\" rel=\"stylesheet\"><style>\r\n\t\t[x-cloak] { display: none !important; }\r\n\t\t* { font-family: 'Space Mono', monospace; }\r\n\t</style><script>\r\n\t\t// SSE for real-time updates\r\n\t\tdocument.addEventListener('DOMContentLoaded', function() {\r\n\t\t\tconst eventSource = new EventSource('/events');\r\n\t\t\t\r\n\t\t\teventSource.onmessage = function(event) {\r\n\t\t\t\tif (event.data === 'update') {\r\n\t\t\t\t\t// Fetch updated todo container\r\n\t\t\t\t\tfetch('/')\r\n\t\t\t\t\t\t.then(response => response.text())\r\n\t\t\t\t\t\t.then(html => {\r\n\t\t\t\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\t\t\t\tconst doc = parser.parseFromString(html, 'text/html');\r\n\t\t\t\t\t\t\tconst newContainer = doc.getElementById('todo-container');\r\n\t\t\t\t\t\t\tconst oldContainer = document.getElementById('todo-container');\r\n\t\t\t\t\t\t\tif (newContainer && oldContainer) {\r\n\t\t\t\t\t\t\t\toldContainer.innerHTML = newContainer.innerHTML;\r\n\t\t\t\t\t\t\t\t// Re-init Alpine on new content\r\n\t\t\t\t\t\t\t\tif (window.Alpine) {\r\n\t\t\t\t\t\t\t\t\twindow.Alpine.initTree(oldContainer);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\teventSource.onerror = function() {\r\n\t\t\t\tconsole.log('SSE connection lost, reconnecting...');\r\n\t\t\t};\r\n\t\t});\r\n\t</script></head><body class=\"min-h-screen bg-white\"><div class=\"max-w-lg mx-auto py-12 px-4\"><!-- Header --><div class=\"text-center mb-8\"><h1 class=\"text-4xl font-bold text-black mb-2\">üêê GOAT Todo</h1><p class=\"text-black/60 text-sm\">Get things done, like a GOAT!</p></div><!-- Main Card -->")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = TodoContainer(todos).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<!-- Footer --><p class=\"text-center text-black/40 text-sm mt-8\">GOAT Stack: Go + AlpineJS + Alpine AJAX + Templ + TailwindCSS</p></div></body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func TodoContainer(todos []domain.Todo) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var2 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var2 == nil {
			templ_7745c5c3_Var2 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<div id=\"todo-container\" class=\"bg-white border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]\"><!-- Add Todo Form --><div class=\"p-4 sm:p-6 border-b-4 border-black\" x-data=\"{ loading: false, error: false }\"><form x-init x-target=\"todo-container\" @ajax:before=\"loading = true; error = false\" @ajax:success=\"$el.reset(); loading = false\" @ajax:error=\"loading = false; error = true\" method=\"POST\" action=\"/todos\" class=\"flex flex-col sm:flex-row gap-2 sm:gap-3\"><input name=\"title\" type=\"text\" placeholder=\"Apa yang mau dikerjakan?\" class=\"flex-1 px-3 sm:px-4 py-2 sm:py-3 bg-white border-4 border-black text-black placeholder-black/40 focus:outline-none focus:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all text-sm sm:text-base\" :disabled=\"loading\" required> <button type=\"submit\" :disabled=\"loading\" :class=\"loading ? 'px-4 sm:px-6 py-2 sm:py-3 bg-black/50 text-white font-bold border-4 border-black cursor-wait text-sm sm:text-base' : 'px-4 sm:px-6 py-2 sm:py-3 bg-black text-white font-bold border-4 border-black hover:bg-white hover:text-black active:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 transition-all text-sm sm:text-base'\"><span x-show=\"!loading\">TAMBAH</span> <span x-show=\"loading\" x-cloak>MENAMBAH...</span></button></form><!-- Error Message --><div x-show=\"error\" x-cloak x-transition class=\"mt-2 p-2 bg-red-100 border-4 border-red-500 text-red-700 text-sm font-bold\">‚ö†Ô∏è Gagal menambahkan! Coba lagi. <button @click=\"error = false\" class=\"ml-2 underline\">Tutup</button></div></div><!-- Todo List --><ul class=\"divide-y-4 divide-black\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if len(todos) == 0 {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<li class=\"p-8 text-center\"><div class=\"text-6xl mb-4\">üéâ</div><p class=\"text-black/60\">Tidak ada todo! Tambahkan yang baru.</p></li>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		for _, todo := range todos {
			templ_7745c5c3_Err = TodoItem(todo).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</ul><!-- Footer Stats -->")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if len(todos) > 0 {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<div class=\"p-4 bg-black text-white\"><p class=\"text-sm text-center font-bold\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(strconv.Itoa(countDone(todos)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/handler/templates/index.templ`, Line: 141, Col: 37}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, " / ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(strconv.Itoa(len(todos)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/handler/templates/index.templ`, Line: 141, Col: 68}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, " SELESAI</p></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func TodoItem(todo domain.Todo) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var5 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var5 == nil {
			templ_7745c5c3_Var5 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "<li id=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var6 string
		templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs("todo-" + strconv.Itoa(todo.ID))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/handler/templates/index.templ`, Line: 150, Col: 38}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "\" x-data=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var7 string
		templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs("{ done: " + strconv.FormatBool(todo.Done) + ", deleting: false }")
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/handler/templates/index.templ`, Line: 151, Col: 77}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "\" x-show=\"!deleting\" x-transition:leave=\"transition ease-in duration-150\" x-transition:leave-start=\"opacity-100\" x-transition:leave-end=\"opacity-0\" class=\"group flex items-center gap-2 sm:gap-4 p-3 sm:p-4 hover:bg-black/5 transition-colors\"><!-- Toggle Checkbox --><form x-init x-target=\"todo-container\" method=\"POST\" action=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var8 templ.SafeURL
		templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinURLErrs("/todos/" + strconv.Itoa(todo.ID) + "/toggle")
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/handler/templates/index.templ`, Line: 163, Col: 57}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "\" class=\"shrink-0\" @submit=\"done = !done\" @ajax:error=\"done = !done\"><button type=\"submit\" :class=\"done ? 'w-6 h-6 sm:w-7 sm:h-7 flex items-center justify-center border-4 border-black bg-black text-white font-bold transition-all hover:scale-110 text-xs sm:text-sm' : 'w-6 h-6 sm:w-7 sm:h-7 flex items-center justify-center border-4 border-black bg-white transition-all hover:scale-110'\"><span x-show=\"done\">‚úì</span></button></form><!-- Title --><span :class=\"done ? 'flex-1 text-sm sm:text-lg transition-all line-through text-black/40 break-words min-w-0' : 'flex-1 text-sm sm:text-lg transition-all text-black font-bold break-words min-w-0'\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var9 string
		templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(todo.Title)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/handler/templates/index.templ`, Line: 180, Col: 15}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "</span><!-- Delete Button --><form x-init x-target=\"todo-container\" method=\"POST\" action=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var10 templ.SafeURL
		templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinURLErrs("/todos/" + strconv.Itoa(todo.ID) + "/delete")
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/handler/templates/index.templ`, Line: 188, Col: 57}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "\" class=\"shrink-0\" @submit=\"deleting = true\" @ajax:error=\"deleting = false\"><button type=\"submit\" class=\"opacity-100 sm:opacity-0 sm:group-hover:opacity-100 px-2 sm:px-3 py-1 text-black font-bold border-4 border-black hover:bg-black hover:text-white transition-all text-xs sm:text-base\">‚úï</button></form></li>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func countDone(todos []domain.Todo) int {
	count := 0
	for _, t := range todos {
		if t.Done {
			count++
		}
	}
	return count
}

var _ = templruntime.GeneratedTemplate
